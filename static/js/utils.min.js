/*! 崩坏 v1.0.0 | (c) wu */
var utils={ajax:function(e,t,o,n,i){if(e=e||"",t=t||null,o=o||void 0,i=i||"json",n=n||"POST",""===e)return console.error("AJAX API配置错误！"),!1;$.ajax({url:e,type:n,dataType:i,data:t,cache:!1,success:function(e){"function"==typeof o&&o(e)},error:function(e){console.error("AJAX 请求错误！"),console.error(e)}})},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(t);return null!==o?decodeURIComponent(o[2]):null},formatNumber:function(e,t){t=parseInt(t,10)||2,e=parseFloat(e);var o=Math.pow(10,t);return Math.round(e*o)/o},cookie:{getCookie:function(e){for(var t=e+"=",o=t.length,n=document.cookie.length,i=0;i<n;){var s=i+o;if(document.cookie.substring(i,s)==t){var r=document.cookie.indexOf(";",s);return-1==r&&(r=document.cookie.length),unescape(document.cookie.substring(s,r))}if(0===(i=document.cookie.indexOf(" ",i)+1))break}return null},setCookie:function(e,t){var o=arguments,n=arguments.length,i=n>2?o[2]:null,s=n>3?o[3]:"/",r=n>4?o[4]:null,a=n>5&&o[5];document.cookie=e+"="+escape(t)+(null===i?"":"; expires="+i.toGMTString())+(null===s?"":"; path="+s)+(null===r?"":"; domain="+r)+(!0===a?"; secure":"")},delCookie:function(e){a.setCookie(e,"",new Date((new Date).valueOf()-864e5))}},showtips:function(e,t){t=t||1,$("#_popup_tips_").remove();var o='<p id="_popup_tips_" class="popup_tips_box">'+e+"</p>";$(document.body).append(o);var n=$("#_popup_tips_"),i=parseInt(n.css("width"))/.9;n.css("margin-left","-"+i/2+"px"),setTimeout(function(){$("#_popup_tips_").remove()},1e3*t)},isMPhone:function(e){var t=!0;return""!==e&&/^0{0,1}(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])[0-9]{8}$/.test(e)||(t=!1),t},isPassword:function(e){var t=!0;return""!==e&&/(?![\\d]+$)(?![a-zA-Z]+$)(?![^\\da-zA-Z]+$).{6,20}$/.test(e)||(t=!1),t},sendCode:function(e,t,o){var n=60,i=this;$(e).on("click",function(){function s(e){0===n?($(e).val("发送验证码").removeClass("disabled"),n=60):($(e).val(n+"秒").addClass("disabled"),n--,setTimeout(function(){new s(e)},1e3))}if($(this).hasClass("disabled"))return!1;var r=$.trim($(t).val()),a=$(o).val();if(checkTel=utils.isMPhone(r),""===r)utils.showtips("请输入手机号码",.8);else if(checkTel){var u={phoneNum:r,_csrf:a},l=$(e).data("apiurl");isloading=!0,i.loadingToast.show(),i.ajax(l,u,function(t){utils.loadingToast.remove(),1===t.status?(utils.showtips("验证码已发送,请查收！"),s(e)):(i.isloading=!1,utils.showtips(t.msg)),utils.loadingToast.remove(),i.isloading=!1},"POST")}else utils.showtips("请输入正确的手机号码",.8)})},ls:{test:function(){return"undefined"!=typeof localStorage},get:function(e){return localStorage.getItem(e)},set:function(e,t){return localStorage.setItem(e,t)},remove:function(e){return localStorage.removeItem(e)}},sess:{test:function(){return"undefined"!=typeof sessionStorage},get:function(e){return sessionStorage.getItem(e)},set:function(e,t){return sessionStorage.setItem(e,t)},remove:function(e){return sessionStorage.removeItem(e)}},inArray:function(e,t){for(var o=0;o<e.length;o++)if(e[o]==t)return o;return-1},dialog:function(e,t){var o;$(".dialog").show(),$(".dialog_yes").on("click",function(){console.log("yes"),t(o=!0)}),$(".dialog_no").on("click",function(){console.log("no"),t(o=!1)})}};Date.prototype.DayFailure=function(e){var t,o=new Date((new Date).toLocaleDateString()).getTime();return o=o.valueOf(),t=new Date(o+864e5*e),t=new Date(t)},Date.prototype.AddDays=function(e){var t,o=new Date(this);return o=o.valueOf(),t=new Date(o+864e5*e),t=new Date(t)},Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),f:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e};